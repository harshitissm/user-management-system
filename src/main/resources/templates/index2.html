<!DOCTYPE html>
<html xmlns:th="http://www.thymeLeaf.org"
  xmlns:sec="http://www.thymeLeaf.org/thymeLeaf-extras-springsecurity3">

<head>

    <title> Admin Page</title>
    
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

	 <!--<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> -->
	
     <link type="text/css" rel="stylesheet" href="first.css"/>
     
     <script type="text/javascript" src="../static/main.js" th:src="@{/main.js}"></script>
     
     <style>
     
     	.row{
     		margin-right: 0;
     		margin-left: 0;
     		padding-left: 5px;
     	}
     	.container1{
     		height: 94vh;
     	}
     	.sideBar{
     		width: 200px;
     		padding-top: 15px;
     	}
     	#v-pills-home-tab{
     		width: 100%;
     	}
     	.tab1{
     		background: #f1f1f1;
     		width: 100%;
     		height: 100%;
     	}
     	.form-group{
     		padding-top: 10px;
     	}
     	.form-group input, select{
     		margin: 0 auto;
     		width: 50%;
		}
		#role{
     		margin: 0 auto;
     		width: 50%;
		}
		.form-group label{
		    display: block;
    		font-weight: bold;
    		text-align: center;
		}
		.button-container-div {
            text-align: center;
        }
        .heading{
        	padding-left: 20px;
        	padding-top: 15px;
        }
        .tab-container{
        	padding-left: 20px;
        }
        .new-user-div{
        	font-weight: bold;
        	padding: 10px;
        	background: white;
        }
        .topbar a{
        	text-decoration: none;
        }
        #topbar-item-1{
        	padding-left: 5px;
        }
        #topbar-item-2{
        	padding-right: 5px;
        }
        form{
        	width: 75%;
        	height: 75%
        }
       
     </style>

</head>

<body>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script src="https://cdn.jsde livr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    
    <nav class="navbar navbar-dark bg-dark navbar-expand-sm d-flex justify-content-between topbar">
        <a class="mr-2 text-white" id="topbar-item-1">
              <span sec:authentication="principal.username" class="text-white" style="font-weight: bold"></span>
                    with roles: ADMIN USER</a>
        <a class="mr-2" id="topbar-item-2" th:href="@{/login}" style="color: #808080">Logout</a>
    </nav>


    <div class="d-flex align-items-start container1">

        <div class="nav flex-column nav-pills me-3 sideBar" id="v-pills-tab" role="tablist" aria-orientation="vertical">
            <button class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home" aria-selected="true">Admin</button>
            <button class="nav-link" id="v-pills-profile-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile" type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false">User</button>
        </div>

        <div class="tab-content tab1" id="v-pills-tabContent">
        
            <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
            <div class="side">
                <div class="row" style="margin-right: 0">
                    <h1 class="heading">Admin panel</h1>
                </div>
                <nav>
                    <div class="nav nav-tabs tab-container" id="nav-tab" role="tablist">
                    <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Home</button>
                    <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Profile</button>
                    </div>
                </nav>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                        <div class="container">                    
                            <table class="table table-striped table-bordered">
                                <caption align="top">All users</caption>
                                <thead class="table-dark">
                                <tr>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Email</th>
                                    <th>Age</th>
                                    <th>Role</th>
                                    <th>Edit</th>
                                    <th>Delete</th>
                                </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="user: ${users}">
                                        <td th:text="${user.firstName}"></td>
                                        <td th:text="${user.lastName}"></td>
                                        <td th:text="${user.age}"></td>
                                        <td th:text="${user.email}"></td>
                                        <td th:text="${user.roles.get(0).getName()}"></td>
                                        <td>
                                           <!-- <a th:href="@{/edit/{id}(id=${user.id})}" class="btn btn-primary">Edit</a> -->
                                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editModal" th:href="@{/edit/{id}(id=${user.id})}" >Edit</button> 
                                            <!-- <a class="btn btn-primary">Edit</a> -->
                                        </td>
                                        <td>
                                            <a
                                                th:href="@{/{id}(id=${user.id})}"
                                                class="btn btn-danger"
                                                onclick="if (!(confirm('Are you sure you want to delete this customer?'))) return false"
                                                >Delete</a
                                            >
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
					  <div class="new-user-div">Add new user</div>
                        <div class="contianer">
							<div class="row justify-content-center" style="margin-right: 0">
								<div class="col-md-6 col-md-offset-3">
								
									<!-- Success Message -->
									<div th:if="${param.success}">
										<div class="alert alert-info">User is Successfully Registered </div>				
									</div>									
									<form th:action="@{/registration}" method="post" th:object="${userDto}">
										<div class="form-group">
											<label class="control-label" for="firstName">
												First Name
											</label>
											<input id="firstName" class="form-control" th:field="*{firstName}" required autofocus="autofocus" />					
										</div>
										
										<div class="form-group">
											<label class="control-label" for="lastName">
												Last Name
											</label>
											<input id="lastName" class="form-control" th:field="*{lastName}" required autofocus="autofocus" />					
										</div>
										
										<div class="form-group">
											<label class="control-label" for="age">
												Age
											</label>
											<input id="age" class="form-control" th:field="*{age}" required autofocus="autofocus" />					
										</div>
										
										<div class="form-group">
											<label class="control-label" for="email">
												Email
											</label>
											<input id="email" class="form-control" th:field="*{email}" required autofocus="autofocus" />					
										</div>
										
										<div class="form-group">
											<label class="control-label" for="role">
												Role
											</label>
											<select id="role" class="form-control" th:field="*{role}" required autofocus="autofocus" >
												<option th:value="'ADMIN'" th:text="ADMIN"></option>
												<option th:value="'USER'" th:text="USER"></option>
											</select>					
										</div>
									
										<div class="form-group">
											<label class="control-label" for="password">
												Password
											</label>
											<input id="password" class="form-control" type="password" th:field="*{password}" required autofocus="autofocus" />					
										</div>
									
										<div class="form-group">
											<div class="button-container-div">
												<button type="submit" class="btn btn-success">Add New User</button>			
											</div>
										</div>
									
									</form>
								</div>
							</div>
						</div>
                    </div>
                </div>
            </div>
            </div>
            <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                <div class ="contents">                        
                    <div class="container">
                        <div class="row">
                            <h1>User information-page</h1>
                        </div>
                
                        <table class="table table-striped table-bordered">
                            <caption align="top">About user</caption>
                            <thead class="table-dark">
                            <tr>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>Age</th>
                                <th>Email</th>
                                <th>Role</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="user: ${userss}">
                                <td th:text="${user.firstName}"></td>
                                <td th:text="${user.lastName}"></td>
                                <td th:text="${user.age}"></td>
                                <td th:text="${user.email}"></td>
                                <td th:text="${user.roles.get(0).getName()}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal -->
    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
   		<form method="post">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
	            <h5 class="modal-title" id="editModalLabel">Edit user</h5>
	            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                        
            	<div class="form-group">
						<label class="control-label" for="firstName">
							First Name
						</label>
						<input type="text" id="firstName" class="form-control" name="firstnameEdit"/>					
				</div><br>
				
				<div class="form-group">
						<label class="control-label" for="lastName">
							Last Name
						</label>
						<input type="text" id="lastName" class="form-control" name="lastnameEdit" value="${user.lastName}"/>					
				</div><br>
				
				<div class="form-group">
						<label class="control-label" for="age">
							Age
						</label>
						<input type="text" id="age" class="form-control" name="ageEdit" value="${user.age}"/>					
				</div><br>
				
				<div class="form-group">
						<label class="control-label" for="email">
							Email
						</label>
						<input type="text" id="email" class="form-control" name="emailEdit" value="${user.email}"/>					
				</div><br>
				
				<div class="form-group">
						<label class="control-label" for="role">
							Role
						</label>
						<select id="role" name="role" class="form-control">
							<option th:value="'ADMIN'" th:text="ADMIN"></option>
							<option th:value="'USER'" th:text="USER"></option>
						</select>					
					</div><br>
				
				<div class="form-group">
						<label class="control-label" for="password">
							Password
						</label>
						<input id="password" class="form-control" type="password" />					
					</div> <br>           	
        
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
        </div>
      </form>
    </div>

</body>

</html>